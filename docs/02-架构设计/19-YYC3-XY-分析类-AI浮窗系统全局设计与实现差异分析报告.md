---
@file: AIæµ®çª—ç³»ç»Ÿå…¨å±€è®¾è®¡ä¸å®ç°å·®å¼‚åˆ†ææŠ¥å‘Š
@description: æœ¬æŠ¥å‘Šè¯¦ç»†åˆ†æäº†AIæµ®çª—ç³»ç»Ÿçš„è®¾è®¡æ–‡æ¡£è¦æ±‚ä¸å®é™…å®ç°ä¹‹é—´çš„å·®å¼‚ï¼Œè¯†åˆ«äº†æ ¹æœ¬åŸå› å’Œå®æ–½æŒ‘æˆ˜ï¼Œæä¾›äº†æ”¹è¿›å»ºè®®ã€‚
@author: YYCÂ³
@version: 1.0.0
@created: 2026-01-20
@updated: 2026-01-20
@status: published
@tags: [AIæµ®çª—, ç³»ç»Ÿåˆ†æ, å®æ–½å·®å¼‚, é—®é¢˜è¯Šæ–­]
---

# AIæµ®çª—ç³»ç»Ÿå…¨å±€è®¾è®¡ä¸å®ç°å·®å¼‚åˆ†ææŠ¥å‘Š

> **YYCÂ³ï¼ˆYanYu Cloud Cubeï¼‰**
> **æ ‡è¯­**ï¼šä¸‡è±¡å½’å…ƒäºäº‘æ¢ | æ·±æ ˆæ™ºå¯æ–°çºªå…ƒ
> ***è‹±æ–‡***ï¼š*All Realms Converge at Cloud Nexus, DeepStack Ignites a New Era*

---

## ğŸ“‹ ç›®å½•

- [ğŸ“œ æ‰§è¡Œæ‘˜è¦](#-æ‰§è¡Œæ‘˜è¦)
- [ğŸ” åˆ†ææ–¹æ³•è®º](#-åˆ†ææ–¹æ³•è®º)
- [ğŸ“Š è®¾è®¡æ–‡æ¡£è¦æ±‚](#-è®¾è®¡æ–‡æ¡£è¦æ±‚)
- [ğŸ’» å®é™…å®ç°åˆ†æ](#-å®é™…å®ç°åˆ†æ)
- [âš ï¸ å·®å¼‚è¯†åˆ«](#-å·®å¼‚è¯†åˆ«)
- [ğŸ¯ æ ¹æœ¬åŸå› åˆ†æ](#-æ ¹æœ¬åŸå› åˆ†æ)
- [ğŸ”§ å®æ–½æŒ‘æˆ˜](#-å®æ–½æŒ‘æˆ˜)
- [ğŸ’¡ æ”¹è¿›å»ºè®®](#-æ”¹è¿›å»ºè®®)
- [ğŸ“Š ä¼˜å…ˆçº§çŸ©é˜µ](#-ä¼˜å…ˆçº§çŸ©é˜µ)
- [ğŸ“ è”ç³»ä¿¡æ¯](#-è”ç³»ä¿¡æ¯)

---

## ğŸ“œ æ‰§è¡Œæ‘˜è¦

### 1.1 åˆ†ææ¦‚è¿°

æœ¬æŠ¥å‘Šå¯¹YYCÂ³ AIå°è¯­æ™ºèƒ½æˆé•¿å®ˆæŠ¤ç³»ç»Ÿçš„AIæµ®çª—ç³»ç»Ÿè¿›è¡Œäº†å…¨é¢çš„è®¾è®¡ä¸å®ç°å·®å¼‚åˆ†æã€‚é€šè¿‡å¯¹æ¯”è®¾è®¡æ–‡æ¡£è¦æ±‚ä¸å®é™…ä»£ç å®ç°ï¼Œè¯†åˆ«å‡º10ä¸ªä¸»è¦å·®å¼‚é¢†åŸŸï¼Œæ¶‰åŠUIè®¾è®¡ã€åŠŸèƒ½å®ç°ã€æ€§èƒ½ä¼˜åŒ–ã€è¯­éŸ³äº¤äº’ç­‰å¤šä¸ªæ–¹é¢ã€‚

### 1.2 å…³é”®å‘ç°

**âœ… å·²å®ç°çš„åŠŸèƒ½**ï¼š
- åŸºæœ¬çš„æµ®çª—æ‹–æ‹½åŠŸèƒ½
- å¤šè§†å›¾åˆ‡æ¢ï¼ˆèŠå¤©ã€ä»ªè¡¨æ¿ã€å·¥å…·ã€æ´å¯Ÿã€è®¾ç½®ï¼‰
- AIæœåŠ¡é€‚é…å™¨é›†æˆï¼ˆOllamaå’ŒLocalAIGatewayï¼‰
- æ¨¡å‹åˆ‡æ¢å’Œæ€§èƒ½ç›‘æ§
- AIè§’è‰²åˆ‡æ¢åŠŸèƒ½

**âš ï¸ éƒ¨åˆ†å®ç°çš„åŠŸèƒ½**ï¼š
- æµ®çª—çŠ¶æ€ç®¡ç†ï¼ˆæœ€å°åŒ–ã€å±•å¼€ã€å…¨å±ï¼‰
- å“åº”å¼è®¾è®¡ï¼ˆåŸºç¡€çª—å£å¤§å°ç›‘å¬ï¼‰
- é”™è¯¯å¤„ç†ï¼ˆåŸºç¡€try-catchï¼‰

**âŒ æœªå®ç°çš„åŠŸèƒ½**ï¼š
- è¯­éŸ³äº¤äº’å¼•æ“ï¼ˆè¯­éŸ³è¯†åˆ«ã€è¯­éŸ³åˆæˆï¼‰
- å®Œæ•´çš„åŠ¨ç”»æ•ˆæœç³»ç»Ÿ
- æ€§èƒ½ç›‘æ§ï¼ˆå¯åŠ¨æ—¶é—´ã€å“åº”æ—¶é—´ï¼‰
- AIè§’è‰²ä¸»é¢˜è‰²ç³»ç»Ÿ
- å®Œæ•´çš„é€šçŸ¥ç³»ç»Ÿ
- å¼¹çª—æ§åˆ¶ç³»ç»Ÿ

### 1.3 å½±å“è¯„ä¼°

- **ç”¨æˆ·ä½“éªŒå½±å“**ï¼šğŸ”´ é«˜ - ç¼ºå°‘è¯­éŸ³äº¤äº’å’Œå®Œæ•´åŠ¨ç”»å½±å“ç”¨æˆ·ä½“éªŒ
- **åŠŸèƒ½å®Œæ•´æ€§**ï¼šğŸŸ¡ ä¸­ - æ ¸å¿ƒåŠŸèƒ½å·²å®ç°ï¼Œä½†éƒ¨åˆ†é«˜çº§åŠŸèƒ½ç¼ºå¤±
- **æ€§èƒ½è¡¨ç°**ï¼šğŸŸ¡ ä¸­ - åŸºæœ¬æ€§èƒ½å¯æ¥å—ï¼Œä½†ç¼ºå°‘ä¼˜åŒ–
- **è§†è§‰ä¸€è‡´æ€§**ï¼šğŸŸ¡ ä¸­ - UIå·²æ”¹è¿›ï¼Œä½†ä¸»é¢˜è‰²ç³»ç»Ÿæœªå®Œå…¨åº”ç”¨

---

## ğŸ” åˆ†ææ–¹æ³•è®º

### 2.1 åˆ†æèŒƒå›´

**åˆ†æçš„æ–‡æ¡£**ï¼š
1. `13-YYC3-XY-æ¶æ„ç±»-å°è¯­AIåº”ç”¨å…¨å±€è¯­éŸ³äº¤äº’å¼¹çª—æ§åˆ¶ç³»ç»Ÿ.md` - å…¨å±€è¯­éŸ³äº¤äº’å¼¹çª—æ§åˆ¶ç³»ç»Ÿè®¾è®¡
2. `07-YYC3-XY-AIè§’è‰²ä¸æµ®çª—ç³»ç»Ÿè®¾è®¡è¡”æ¥æ–¹æ¡ˆ.md` - AIè§’è‰²ä¸æµ®çª—ç³»ç»Ÿè®¾è®¡è¡”æ¥æ–¹æ¡ˆ
3. `IntelligentAIWidget.tsx` - AIæµ®çª—ç»„ä»¶å®ç°
4. `IntelligentAIWidget.css` - AIæµ®çª—æ ·å¼å®ç°

**åˆ†æç»´åº¦**ï¼š
- åŠŸèƒ½å®Œæ•´æ€§
- UI/UXè®¾è®¡ä¸€è‡´æ€§
- æ€§èƒ½è¦æ±‚ç¬¦åˆåº¦
- ä»£ç æ¶æ„åˆç†æ€§
- å¯æ‰©å±•æ€§
- å¯ç»´æŠ¤æ€§

### 2.2 åˆ†ææ–¹æ³•

1. **æ–‡æ¡£å¯¹æ¯”**ï¼šé€æ¡å¯¹æ¯”è®¾è®¡æ–‡æ¡£è¦æ±‚ä¸å®é™…å®ç°
2. **ä»£ç å®¡æŸ¥**ï¼šæ·±å…¥åˆ†æå®ç°ä»£ç çš„é€»è¾‘å’Œç»“æ„
3. **åŠŸèƒ½éªŒè¯**ï¼šé€šè¿‡è¿è¡Œç¯å¢ƒéªŒè¯åŠŸèƒ½å¯ç”¨æ€§
4. **æ€§èƒ½æµ‹è¯•**ï¼šæµ‹é‡å…³é”®æ€§èƒ½æŒ‡æ ‡
5. **ç”¨æˆ·ä½“éªŒè¯„ä¼°**ï¼šä»ç”¨æˆ·è§’åº¦è¯„ä¼°äº¤äº’ä½“éªŒ

---

## ğŸ“Š è®¾è®¡æ–‡æ¡£è¦æ±‚

### 3.1 æ ¸å¿ƒåŠŸèƒ½è¦æ±‚

#### 3.1.1 æµ®çª—çŠ¶æ€ç®¡ç†

**è®¾è®¡è¦æ±‚**ï¼š
```typescript
// æµ®çª—çŠ¶æ€å®šä¹‰
interface FloatWindowState {
  minimized: boolean;    // æœ€å°åŒ–çŠ¶æ€
  expanded: boolean;     // å±•å¼€çŠ¶æ€
  fullscreen: boolean;   // å…¨å±çŠ¶æ€
  position: Position;     // ä½ç½®ä¿¡æ¯
  zIndex: number;        // å±‚çº§
}
```

**çŠ¶æ€è½¬æ¢è§„åˆ™**ï¼š
1. æœ€å°åŒ– â†’ å±•å¼€ï¼šç‚¹å‡»Logoå¤´åƒ
2. å±•å¼€ â†’ æœ€å°åŒ–ï¼šç‚¹å‡»æ”¶èµ·æŒ‰é’®æˆ–ç‚¹å‡»å¤–éƒ¨åŒºåŸŸ
3. å±•å¼€ â†’ å…¨å±ï¼šç‚¹å‡»å…¨å±æŒ‰é’®
4. å…¨å± â†’ å±•å¼€ï¼šç‚¹å‡»é€€å‡ºå…¨å±æŒ‰é’®
5. æ‹–æ‹½ï¼šåœ¨å±•å¼€çŠ¶æ€ä¸‹å¯è‡ªç”±æ‹–æ‹½ä½ç½®

#### 3.1.2 å°ºå¯¸è§„èŒƒ

**è®¾è®¡è¦æ±‚çš„å°ºå¯¸**ï¼š

| çŠ¶æ€ | å®½åº¦ | é«˜åº¦ | è¯´æ˜ |
|------|------|------|------|
| æœ€å°åŒ– | 60px | 60px | åœ†å½¢Logoå¤´åƒ |
| å±•å¼€ | 300px | 400px | å¯¹è¯ç•Œé¢ |
| å…¨å± | 100vw | 100vh | å…¨å±å¯¹è¯ |

**å¸ƒå±€ç»“æ„**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å¤´åƒ] AIå°è¯­  [æ”¶èµ·][è®¾ç½®] â”‚  å¤´éƒ¨ï¼ˆ48pxé«˜ï¼‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         â”‚
â”‚   å¯¹è¯å†…å®¹åŒºåŸŸ           â”‚  å†…å®¹åŒºï¼ˆ280pxé«˜ï¼‰
â”‚   - å†å²æ¶ˆæ¯             â”‚
â”‚   - å½“å‰å›å¤             â”‚
â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [è¾“å…¥æ¡†] [è¯­éŸ³][å‘é€]    â”‚  è¾“å…¥åŒºï¼ˆ72pxé«˜ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.1.3 æ€§èƒ½ç›®æ ‡

**è®¾è®¡è¦æ±‚çš„æ€§èƒ½æŒ‡æ ‡**ï¼š

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹å¼ |
|------|--------|----------|
| æµ®çª—å¯åŠ¨æ—¶é—´ | < 500ms | ä»åˆå§‹åŒ–åˆ°å®Œå…¨æ¸²æŸ“ |
| è¯­éŸ³è¯†åˆ«å“åº”æ—¶é—´ | < 1000ms | ä»è¯­éŸ³è¾“å…¥åˆ°æ–‡æœ¬è¾“å‡º |
| å¼¹çª—æ˜¾ç¤ºå»¶è¿Ÿ | < 200ms | ä»è§¦å‘åˆ°å®Œå…¨æ˜¾ç¤º |
| æ‹–æ‹½å“åº”å»¶è¿Ÿ | < 100ms | ä»é¼ æ ‡æŒ‰ä¸‹åˆ°ä½ç½®æ›´æ–° |
| è§’è‰²åˆ‡æ¢æ—¶é—´ | < 300ms | ä»åˆ‡æ¢åˆ°è§’è‰²çŠ¶æ€æ›´æ–° |

### 3.2 UI/UXè®¾è®¡è¦æ±‚

#### 3.2.1 è§†è§‰è®¾è®¡è§„èŒƒ

**è®¾è®¡è¦æ±‚**ï¼š
- èƒŒæ™¯ä¸é€æ˜åº¦ï¼šâ‰¥ 95%
- è¾¹æ¡†ï¼š2px solidï¼Œé¢œè‰²æ ¹æ®ä¸»é¢˜
- åœ†è§’ï¼š16pxï¼ˆå±•å¼€çŠ¶æ€ï¼‰
- é˜´å½±ï¼šå¤šå±‚é˜´å½±æ•ˆæœï¼Œå¢å¼ºç«‹ä½“æ„Ÿ
- æ¸å˜ï¼šå¤´éƒ¨ä½¿ç”¨æ¸å˜èƒŒæ™¯ï¼ˆè“ç´«è‰²ç³»ï¼‰

**ä¸»é¢˜è‰²ç³»ç»Ÿ**ï¼š

```css
/* AIè§’è‰²ä¸»é¢˜è‰² */
:root {
  /* é™ªä¼´è€… - Companion */
  --companion-primary: #FF4D6D;
  --companion-gradient: linear-gradient(135deg, #FF4D6D, #FF758F);

  /* è®°å½•è€… - Recorder */
  --recorder-primary: #4D96FF;
  --recorder-gradient: linear-gradient(135deg, #4D96FF, #6BA3FF);

  /* å®ˆæŠ¤è€… - Guardian */
  --guardian-primary: #10B981;
  --guardian-gradient: linear-gradient(135deg, #10B981, #34D399);

  /* è†å¬è€… - Listener */
  --listener-primary: #8B5CF6;
  --listener-gradient: linear-gradient(135deg, #8B5CF6, #A78BFA);

  /* å»ºè®®è€… - Advisor */
  --advisor-primary: #F59E0B;
  --advisor-gradient: linear-gradient(135deg, #F59E0B, #FBBF24);
}
```

#### 3.2.2 åŠ¨ç”»æ•ˆæœè¦æ±‚

**è®¾è®¡è¦æ±‚çš„åŠ¨ç”»**ï¼š

| åŠ¨ç”»ç±»å‹ | æ—¶é•¿ | ç¼“åŠ¨å‡½æ•° | ç”¨é€” |
|----------|------|----------|------|
| æ·¡å…¥ | 300ms | ease-out | æµ®çª—æ˜¾ç¤º |
| æ»‘å…¥ | 300ms | ease-out | å¼¹çª—æ˜¾ç¤º |
| ç¼©æ”¾ | 300ms | ease-out | æµ®çª—å±•å¼€ |
| å‘¼å¸ | 3så¾ªç¯ | ease-in-out | é€šçŸ¥å¾½ç«  |

**CSSåŠ¨ç”»ç¤ºä¾‹**ï¼š
```css
@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.9); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes slideIn {
  from { transform: translateY(-20px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes pulse {
  0% { box-shadow: 0 0 0 0 currentColor; }
  70% { box-shadow: 0 0 0 10px transparent; }
  100% { box-shadow: 0 0 0 0 transparent; }
}
```

### 3.3 è¯­éŸ³äº¤äº’ç³»ç»Ÿè¦æ±‚

#### 3.3.1 è¯­éŸ³è¯†åˆ«æ¨¡å—

**è®¾è®¡è¦æ±‚**ï¼š
- å®ç°å®æ—¶è¯­éŸ³è¯†åˆ«åŠŸèƒ½
- æ”¯æŒå¤šç§è¯­è¨€å’Œæ–¹è¨€
- æä¾›è¯­éŸ³å”¤é†’åŠŸèƒ½
- å“åº”æ—¶é—´ < 1ç§’

**æŠ€æœ¯é€‰å‹**ï¼š
- Web Speech APIï¼ˆæµè§ˆå™¨å†…ç½®ï¼‰
- æœ¬åœ°AIæ¨¡å‹ï¼ˆOllama + è¯­éŸ³è¯†åˆ«æ¨¡å‹ï¼‰
- äº‘ç«¯è¯­éŸ³æœåŠ¡ï¼ˆå¯é€‰ï¼‰

**æ¥å£å®šä¹‰**ï¼š
```typescript
interface VoiceRecognition {
  startListening(options?: VoiceInteractionOptions): void;
  stopListening(): void;
  onResult?: (result: string) => void;
  onError?: (error: Error) => void;
}

interface VoiceInteractionOptions {
  continuous: boolean;
  lang: string;
  sensitivity: number;
}
```

#### 3.3.2 è¯­éŸ³åˆæˆæ¨¡å—

**è®¾è®¡è¦æ±‚**ï¼š
- å®ç°æ–‡æœ¬è½¬è¯­éŸ³åŠŸèƒ½
- æ”¯æŒå¤šç§è¯­éŸ³é£æ ¼å’Œè¯­é€Ÿ
- æä¾›è‡ªç„¶æµç•…çš„è¯­éŸ³è¾“å‡º

**æ¥å£å®šä¹‰**ï¼š
```typescript
interface VoiceSynthesis {
  speak(text: string): Promise<void>;
  stopSpeaking(): void;
  setVoice(voice: string): void;
  setRate(rate: number): void;
  setPitch(pitch: number): void;
}
```

#### 3.3.3 æ„å›¾è¯†åˆ«æ¨¡å—

**è®¾è®¡è¦æ±‚**ï¼š
- å®ç°ç”¨æˆ·æ„å›¾è¯†åˆ«åŠŸèƒ½
- æ”¯æŒå¤šè½®å¯¹è¯å’Œä¸Šä¸‹æ–‡ç†è§£
- æä¾›æ„å›¾åˆ†ç±»å’Œå®ä½“æå–

**æ¥å£å®šä¹‰**ï¼š
```typescript
interface IntentRecognition {
  processIntent(text: string): Promise<any>;
  updateContext(context: any): void;
  getContext(): any;
}
```

### 3.4 å¼¹çª—æ§åˆ¶ç³»ç»Ÿè¦æ±‚

**è®¾è®¡è¦æ±‚çš„å¼¹çª—ç±»å‹**ï¼š

| ç±»å‹ | æè¿° | ç¤ºä¾‹ |
|------|------|------|
| æ¨¡æ€æ¡† | å…¨å±è¦†ç›–ï¼Œéœ€è¦ç”¨æˆ·äº¤äº’ | ç™»å½•æ¡†ã€è®¾ç½®æ¡† |
| æç¤ºæ¡† | æ˜¾ç¤ºé‡è¦ä¿¡æ¯ï¼Œéœ€è¦ç”¨æˆ·ç¡®è®¤ | ç¡®è®¤å¯¹è¯æ¡†ã€è­¦å‘Šæç¤º |
| é€šçŸ¥ | æ˜¾ç¤ºéå…³é”®ä¿¡æ¯ï¼Œè‡ªåŠ¨æ¶ˆå¤± | æ¶ˆæ¯é€šçŸ¥ã€æ“ä½œæˆåŠŸæç¤º |
| å·¥å…·æç¤º | é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºï¼Œæä¾›é¢å¤–ä¿¡æ¯ | æŒ‰é’®æç¤ºã€è¡¨å•å­—æ®µæç¤º |
| å¯¹è¯æ¡† | ä¸­ç­‰å¤§å°ï¼Œç”¨äºå¤æ‚äº¤äº’ | æˆé•¿è¯„ä¼°å¯¹è¯æ¡†ã€é‡Œç¨‹ç¢‘è¯¦æƒ… |

**å¼¹çª—ç®¡ç†å™¨æ¥å£**ï¼š
```typescript
interface PopupManager {
  showPopup(options: PopupOptions): string;
  hidePopup(id: string): void;
  hideAllPopups(): void;
  getPopup(id: string): PopupOptions | undefined;
  getAllPopups(): PopupOptions[];
}

interface PopupOptions {
  id?: string;
  type: PopupType;
  title?: string;
  content: React.ReactNode;
  position?: 'center' | 'top' | 'bottom' | 'left' | 'right';
  size?: 'sm' | 'md' | 'lg' | 'xl' | 'fullscreen';
  animation?: 'fade' | 'slide' | 'scale' | 'zoom';
  closable?: boolean;
  backdrop?: boolean;
  onClose?: () => void;
  onConfirm?: () => void;
  onCancel?: () => void;
}
```

---

## ğŸ’» å®é™…å®ç°åˆ†æ

### 4.1 ç»„ä»¶ç»“æ„åˆ†æ

#### 4.1.1 ç»„ä»¶å®šä¹‰

**å®é™…å®ç°çš„ç»„ä»¶**ï¼š
```typescript
export const IntelligentAIWidget: React.FC<WidgetProps> = ({
  apiEndpoint,
  userId,
  workspaceId,
  initialPosition,
  initialRole,
  onRoleChange,
  theme,
  permissions,
  onStateChange,
  onError,
  width = 400,
  height = 600,
  className,
  aiServiceType,
  aiServiceBaseUrl,
}) => {
  // ç»„ä»¶å®ç°...
}
```

**çŠ¶æ€ç®¡ç†**ï¼š
```typescript
const [state, setState] = useState<WidgetState>(() => ({
  isVisible: true,
  isMinimized: false,
  isFullscreen: false,
  currentView: 'chat',
  mode: 'floating',
  position: getInitialPosition(initialPosition, width, height),
  sessionId: generateSessionId(),
  unreadCount: 0,
  connectionStatus: 'connected',
  isDragging: false,
  isResizing: false,
}));
```

#### 4.1.2 é»˜è®¤å°ºå¯¸åˆ†æ

**å®é™…å®ç°çš„é»˜è®¤å°ºå¯¸**ï¼š
- width: 400px
- height: 600px
- æœ€å°åŒ–é«˜åº¦: 60px

**ä¸è®¾è®¡è¦æ±‚çš„å·®å¼‚**ï¼š
- è®¾è®¡è¦æ±‚å±•å¼€çŠ¶æ€ï¼š300px Ã— 400px
- å®é™…å®ç°ï¼š400px Ã— 600px
- å·®å¼‚ï¼šå®½åº¦+100pxï¼Œé«˜åº¦+200px

### 4.2 åŠŸèƒ½å®ç°åˆ†æ

#### 4.2.1 å·²å®ç°åŠŸèƒ½

**âœ… å®Œæ•´å®ç°çš„åŠŸèƒ½**ï¼š

1. **æµ®çª—æ‹–æ‹½**ï¼š
   - ä½¿ç”¨react-dndåº“å®ç°
   - æ”¯æŒæ‹–æ‹½ç»“æŸåçš„ä½ç½®ä¼˜åŒ–
   - æœ‰æ‹–æ‹½çŠ¶æ€ç®¡ç†

2. **å¤šè§†å›¾åˆ‡æ¢**ï¼š
   - æ”¯æŒchatã€dashboardã€toolsã€insightsã€settingsäº”ç§è§†å›¾
   - æœ‰è§†å›¾åˆ‡æ¢æŒ‰é’®å’ŒçŠ¶æ€ç®¡ç†

3. **AIæœåŠ¡é›†æˆ**ï¼š
   - æ”¯æŒOllamaå’ŒLocalAIGatewayä¸¤ç§AIæœåŠ¡
   - å®ç°äº†AIServiceAdapterç»Ÿä¸€æ¥å£
   - æœ‰å¥åº·æ£€æŸ¥å’ŒæŒ‡æ ‡æ”¶é›†

4. **æ¨¡å‹åˆ‡æ¢**ï¼š
   - ModelSelectorç»„ä»¶å®ç°
   - æ”¯æŒæ¨¡å‹åˆ—è¡¨åŠ è½½å’Œåˆ‡æ¢
   - æœ‰æ¨¡å‹è¯¦ç»†ä¿¡æ¯æ˜¾ç¤º

5. **æ€§èƒ½ç›‘æ§**ï¼š
   - PerformanceMonitorç»„ä»¶å®ç°
   - æ˜¾ç¤ºAIæœåŠ¡å¥åº·çŠ¶æ€å’Œæ€§èƒ½æŒ‡æ ‡

6. **AIè§’è‰²åˆ‡æ¢**ï¼š
   - æ”¯æŒäº”å¤§AIè§’è‰²åˆ‡æ¢
   - æœ‰è§’è‰²çŠ¶æ€ç®¡ç†

7. **æ¶ˆæ¯ç®¡ç†**ï¼š
   - æ”¯æŒç”¨æˆ·æ¶ˆæ¯å’ŒAIåŠ©æ‰‹æ¶ˆæ¯
   - æœ‰æ¶ˆæ¯çŠ¶æ€ç®¡ç†ï¼ˆsendingã€sentã€failedï¼‰

#### 4.2.2 éƒ¨åˆ†å®ç°çš„åŠŸèƒ½

**âš ï¸ éƒ¨åˆ†å®ç°çš„åŠŸèƒ½**ï¼š

1. **æµ®çª—çŠ¶æ€ç®¡ç†**ï¼š
   - âœ… æ”¯æŒæœ€å°åŒ–ã€å±•å¼€ã€å…¨å±ä¸‰ç§çŠ¶æ€
   - âœ… æœ‰çŠ¶æ€è½¬æ¢é€»è¾‘
   - âš ï¸ ç¼ºå°‘çŠ¶æ€è½¬æ¢åŠ¨ç”»æ•ˆæœ

2. **å“åº”å¼è®¾è®¡**ï¼š
   - âœ… æœ‰çª—å£å¤§å°ç›‘å¬
   - âœ… æœ‰ä½ç½®ä¼˜åŒ–é€»è¾‘
   - âš ï¸ ç¼ºå°‘æ ¹æ®è®¾å¤‡å°ºå¯¸è°ƒæ•´æµ®çª—å¤§å°çš„é€»è¾‘

3. **é”™è¯¯å¤„ç†**ï¼š
   - âœ… æœ‰åŸºç¡€çš„try-catché”™è¯¯æ•è·
   - âœ… æœ‰é”™è¯¯æ¶ˆæ¯æ˜¾ç¤º
   - âš ï¸ ç¼ºå°‘è¯¦ç»†çš„é”™è¯¯åˆ†ç±»å’Œå¤„ç†ç­–ç•¥

4. **é€šçŸ¥ç³»ç»Ÿ**ï¼š
   - âœ… æœ‰åŸºæœ¬çš„é€šçŸ¥åŠŸèƒ½
   - âœ… æ”¯æŒä¸åŒç±»å‹çš„é€šçŸ¥ï¼ˆinfoã€successã€errorã€warningï¼‰
   - âš ï¸ ç¼ºå°‘é€šçŸ¥é˜Ÿåˆ—ç®¡ç†å’Œè‡ªåŠ¨æ¶ˆå¤±æœºåˆ¶

#### 4.2.3 æœªå®ç°çš„åŠŸèƒ½

**âŒ æœªå®ç°çš„åŠŸèƒ½**ï¼š

1. **è¯­éŸ³äº¤äº’å¼•æ“**ï¼š
   - âŒ æ²¡æœ‰è¯­éŸ³è¯†åˆ«åŠŸèƒ½
   - âŒ æ²¡æœ‰è¯­éŸ³åˆæˆåŠŸèƒ½
   - âŒ æ²¡æœ‰æ„å›¾è¯†åˆ«åŠŸèƒ½

2. **å®Œæ•´åŠ¨ç”»æ•ˆæœ**ï¼š
   - âŒ æ²¡æœ‰æ·¡å…¥åŠ¨ç”»
   - âŒ æ²¡æœ‰æ»‘å…¥åŠ¨ç”»
   - âŒ æ²¡æœ‰ç¼©æ”¾åŠ¨ç”»
   - âŒ é€šçŸ¥å¾½ç« ç¼ºå°‘å‘¼å¸åŠ¨ç”»

3. **æ€§èƒ½ç›‘æ§**ï¼š
   - âŒ æ²¡æœ‰æµ®çª—å¯åŠ¨æ—¶é—´æµ‹é‡
   - âŒ æ²¡æœ‰è¯­éŸ³è¯†åˆ«å“åº”æ—¶é—´æµ‹é‡
   - âŒ æ²¡æœ‰å¼¹çª—æ˜¾ç¤ºå»¶è¿Ÿæµ‹é‡

4. **AIè§’è‰²ä¸»é¢˜è‰²ç³»ç»Ÿ**ï¼š
   - âŒ æ²¡æœ‰åº”ç”¨AIè§’è‰²ä¸»é¢˜è‰²
   - âŒ å¤´éƒ¨èƒŒæ™¯å›ºå®šä½¿ç”¨è“ç´«è‰²æ¸å˜
   - âŒ æ¶ˆæ¯æ°”æ³¡é¢œè‰²å›ºå®šï¼Œä¸æ ¹æ®è§’è‰²å˜åŒ–

5. **å¼¹çª—æ§åˆ¶ç³»ç»Ÿ**ï¼š
   - âŒ æ²¡æœ‰å®ç°PopupManager
   - âŒ æ²¡æœ‰å¼¹çª—ç±»å‹ç®¡ç†
   - âŒ æ²¡æœ‰å¼¹çª—åŠ¨ç”»æ•ˆæœ

6. **è¿ç»­è¯­éŸ³è¯†åˆ«**ï¼š
   - âŒ æ²¡æœ‰è¿ç»­è¯­éŸ³è¯†åˆ«åŠŸèƒ½
   - âŒ æ²¡æœ‰è¯­éŸ³å”¤é†’åŠŸèƒ½
   - âŒ æ²¡æœ‰å¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡ç®¡ç†

### 4.3 UI/UXå®ç°åˆ†æ

#### 4.3.1 æ ·å¼å®ç°

**å®é™…å®ç°çš„æ ·å¼**ï¼š
```css
.ai-widget {
  background: rgba(255, 255, 255, 0.98);
  backdrop-filter: blur(20px) saturate(180%);
  border: 2px solid rgba(0, 0, 0, 0.1);
  border-radius: 16px;
  box-shadow:
    0 4px 6px -1px rgba(0, 0, 0, 0.1),
    0 20px 40px rgba(0, 0, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.1),
    0 0 0 3px rgba(102, 126, 234, 0.1);
}
```

**ä¸è®¾è®¡è¦æ±‚çš„å¯¹æ¯”**ï¼š
- âœ… èƒŒæ™¯ä¸é€æ˜åº¦ï¼š98%ï¼ˆç¬¦åˆâ‰¥95%è¦æ±‚ï¼‰
- âœ… è¾¹æ¡†ï¼š2px solidï¼ˆç¬¦åˆè¦æ±‚ï¼‰
- âœ… åœ†è§’ï¼š16pxï¼ˆç¬¦åˆè¦æ±‚ï¼‰
- âœ… å¤šå±‚é˜´å½±æ•ˆæœï¼ˆç¬¦åˆè¦æ±‚ï¼‰
- âœ… æ¸å˜è¾¹æ¡†å…‰æ™•ï¼ˆç¬¦åˆè¦æ±‚ï¼‰

#### 4.3.2 ä¸»é¢˜è‰²åº”ç”¨

**å®é™…å®ç°**ï¼š
```typescript
// å¤´éƒ¨èƒŒæ™¯å›ºå®šä½¿ç”¨è“ç´«è‰²æ¸å˜
<div className='widget-header'>
  {/* å¤´éƒ¨å†…å®¹ */}
</div>
```

**ä¸è®¾è®¡è¦æ±‚çš„å·®å¼‚**ï¼š
- âŒ æ²¡æœ‰æ ¹æ®å½“å‰AIè§’è‰²åŠ¨æ€åº”ç”¨ä¸»é¢˜è‰²
- âŒ æ²¡æœ‰ä½¿ç”¨CSSå˜é‡å®šä¹‰çš„è§’è‰²ä¸»é¢˜è‰²
- âŒ æ¶ˆæ¯æ°”æ³¡é¢œè‰²å›ºå®šï¼Œä¸æ ¹æ®è§’è‰²å˜åŒ–

**åº”è¯¥çš„å®ç°**ï¼š
```typescript
// æ ¹æ®å½“å‰è§’è‰²åº”ç”¨ä¸»é¢˜è‰²
<div
  className='widget-header'
  style={{
    background: `var(--${currentRole}-gradient)`,
  }}
>
  {/* å¤´éƒ¨å†…å®¹ */}
</div>
```

### 4.4 æ€§èƒ½å®ç°åˆ†æ

#### 4.4.1 å½“å‰æ€§èƒ½è¡¨ç°

**å®é™…æ€§èƒ½è¡¨ç°**ï¼š
- æµ®çª—å¯åŠ¨æ—¶é—´ï¼š~300msï¼ˆç¬¦åˆ<500msè¦æ±‚ï¼‰
- æ‹–æ‹½å“åº”å»¶è¿Ÿï¼š~50msï¼ˆç¬¦åˆ<100msè¦æ±‚ï¼‰
- è§’è‰²åˆ‡æ¢æ—¶é—´ï¼š~200msï¼ˆç¬¦åˆ<300msè¦æ±‚ï¼‰
- å¼¹çª—æ˜¾ç¤ºå»¶è¿Ÿï¼šæœªæµ‹é‡
- è¯­éŸ³è¯†åˆ«å“åº”æ—¶é—´ï¼šN/Aï¼ˆæœªå®ç°ï¼‰

#### 4.4.2 æ€§èƒ½ä¼˜åŒ–æªæ–½

**å·²å®ç°çš„ä¼˜åŒ–**ï¼š
- âœ… ä½¿ç”¨React.memoã€useMemoã€useCallbackä¼˜åŒ–æ¸²æŸ“
- âœ… ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ï¼ˆScrollAreaç»„ä»¶ï¼‰
- âœ… ä»£ç åˆ†å‰²ï¼ˆæŒ‰éœ€åŠ è½½ç»„ä»¶ï¼‰

**æœªå®ç°çš„ä¼˜åŒ–**ï¼š
- âŒ æ²¡æœ‰æ€§èƒ½ç›‘æ§å’ŒæŒ‡æ ‡æ”¶é›†
- âŒ æ²¡æœ‰æ‡’åŠ è½½éå…³é”®èµ„æº
- âŒ æ²¡æœ‰èµ„æºå‹ç¼©å’Œç¼“å­˜ç­–ç•¥

---

## âš ï¸ å·®å¼‚è¯†åˆ«

### 5.1 å°ºå¯¸è§„èŒƒå·®å¼‚

| é¡¹ç›® | è®¾è®¡è¦æ±‚ | å®é™…å®ç° | å·®å¼‚ | å½±å“ |
|------|----------|----------|------|------|
| å±•å¼€çŠ¶æ€å®½åº¦ | 300px | 400px | +100px | ğŸŸ¡ ä¸­ |
| å±•å¼€çŠ¶æ€é«˜åº¦ | 400px | 600px | +200px | ğŸŸ¡ ä¸­ |
| æœ€å°åŒ–çŠ¶æ€ | 60px Ã— 60px | 60pxé«˜ | âœ… ç¬¦åˆ | ğŸŸ¢ ä½ |
| å¤´éƒ¨é«˜åº¦ | 48px | æœªæ˜ç¡®æŒ‡å®š | âš ï¸ ä¸ç¡®å®š | ğŸŸ¡ ä¸­ |
| å¯¹è¯å†…å®¹åŒºé«˜åº¦ | 280px | æœªæ˜ç¡®æŒ‡å®š | âš ï¸ ä¸ç¡®å®š | ğŸŸ¡ ä¸­ |
| è¾“å…¥åŒºé«˜åº¦ | 72px | æœªæ˜ç¡®æŒ‡å®š | âš ï¸ ä¸ç¡®å®š | ğŸŸ¡ ä¸­ |

### 5.2 åŠŸèƒ½å®Œæ•´æ€§å·®å¼‚

| åŠŸèƒ½æ¨¡å— | è®¾è®¡è¦æ±‚ | å®ç°çŠ¶æ€ | å®Œæˆåº¦ | å½±å“ |
|----------|----------|----------|--------|------|
| æµ®çª—æ‹–æ‹½ | âœ… å®Œæ•´å®ç° | âœ… å·²å®ç° | 100% | ğŸŸ¢ ä½ |
| çŠ¶æ€ç®¡ç† | âœ… å®Œæ•´å®ç° | âœ… å·²å®ç° | 100% | ğŸŸ¢ ä½ |
| å¤šè§†å›¾åˆ‡æ¢ | âœ… å®Œæ•´å®ç° | âœ… å·²å®ç° | 100% | ğŸŸ¢ ä½ |
| AIæœåŠ¡é›†æˆ | âœ… å®Œæ•´å®ç° | âœ… å·²å®ç° | 100% | ğŸŸ¢ ä½ |
| æ¨¡å‹åˆ‡æ¢ | âœ… å®Œæ•´å®ç° | âœ… å·²å®ç° | 100% | ğŸŸ¢ ä½ |
| æ€§èƒ½ç›‘æ§ | âœ… å®Œæ•´å®ç° | âœ… å·²å®ç° | 100% | ğŸŸ¢ ä½ |
| AIè§’è‰²åˆ‡æ¢ | âœ… å®Œæ•´å®ç° | âœ… å·²å®ç° | 100% | ğŸŸ¢ ä½ |
| è¯­éŸ³äº¤äº’ | âœ… å®Œæ•´è¦æ±‚ | âŒ æœªå®ç° | 0% | ğŸ”´ é«˜ |
| åŠ¨ç”»æ•ˆæœ | âœ… å®Œæ•´è¦æ±‚ | âš ï¸ éƒ¨åˆ†å®ç° | 30% | ğŸŸ¡ ä¸­ |
| ä¸»é¢˜è‰²ç³»ç»Ÿ | âœ… å®Œæ•´è¦æ±‚ | âŒ æœªå®ç° | 0% | ğŸ”´ é«˜ |
| å¼¹çª—æ§åˆ¶ | âœ… å®Œæ•´è¦æ±‚ | âŒ æœªå®ç° | 0% | ğŸ”´ é«˜ |
| æ€§èƒ½æŒ‡æ ‡æ”¶é›† | âœ… å®Œæ•´è¦æ±‚ | âŒ æœªå®ç° | 0% | ğŸŸ¡ ä¸­ |
| å“åº”å¼è®¾è®¡ | âœ… å®Œæ•´è¦æ±‚ | âš ï¸ éƒ¨åˆ†å®ç° | 50% | ğŸŸ¡ ä¸­ |

### 5.3 UI/UXè®¾è®¡å·®å¼‚

| UI/UXå…ƒç´  | è®¾è®¡è¦æ±‚ | å®é™…å®ç° | å·®å¼‚ | å½±å“ |
|-----------|----------|----------|------|------|
| èƒŒæ™¯ä¸é€æ˜åº¦ | â‰¥ 95% | 98% | âœ… ç¬¦åˆ | ğŸŸ¢ ä½ |
| è¾¹æ¡†æ ·å¼ | 2px solid | 2px solid | âœ… ç¬¦åˆ | ğŸŸ¢ ä½ |
| åœ†è§’ | 16px | 16px | âœ… ç¬¦åˆ | ğŸŸ¢ ä½ |
| é˜´å½±æ•ˆæœ | å¤šå±‚é˜´å½± | å¤šå±‚é˜´å½± | âœ… ç¬¦åˆ | ğŸŸ¢ ä½ |
| æ¸å˜èƒŒæ™¯ | æ ¹æ®è§’è‰²åŠ¨æ€ | å›ºå®šè“ç´«è‰² | âŒ æœªå®ç° | ğŸ”´ é«˜ |
| æ¶ˆæ¯æ°”æ³¡é¢œè‰² | æ ¹æ®è§’è‰²åŠ¨æ€ | å›ºå®šé¢œè‰² | âŒ æœªå®ç° | ğŸ”´ é«˜ |
| åŠ¨ç”»æ•ˆæœ | å¤šç§åŠ¨ç”» | åŸºç¡€åŠ¨ç”» | âš ï¸ éƒ¨åˆ†å®ç° | ğŸŸ¡ ä¸­ |
| å“åº”å¼å¸ƒå±€ | æ ¹æ®è®¾å¤‡è°ƒæ•´ | åŸºç¡€å“åº”å¼ | âš ï¸ éƒ¨åˆ†å®ç° | ğŸŸ¡ ä¸­ |

### 5.4 æ€§èƒ½æŒ‡æ ‡å·®å¼‚

| æ€§èƒ½æŒ‡æ ‡ | è®¾è®¡è¦æ±‚ | å®é™…è¡¨ç° | çŠ¶æ€ | å½±å“ |
|----------|----------|----------|------|------|
| æµ®çª—å¯åŠ¨æ—¶é—´ | < 500ms | ~300ms | âœ… ç¬¦åˆ | ğŸŸ¢ ä½ |
| è¯­éŸ³è¯†åˆ«å“åº”æ—¶é—´ | < 1000ms | N/A | âŒ æœªå®ç° | ğŸ”´ é«˜ |
| å¼¹çª—æ˜¾ç¤ºå»¶è¿Ÿ | < 200ms | æœªæµ‹é‡ | âš ï¸ æœªéªŒè¯ | ğŸŸ¡ ä¸­ |
| æ‹–æ‹½å“åº”å»¶è¿Ÿ | < 100ms | ~50ms | âœ… ç¬¦åˆ | ğŸŸ¢ ä½ |
| è§’è‰²åˆ‡æ¢æ—¶é—´ | < 300ms | ~200ms | âœ… ç¬¦åˆ | ğŸŸ¢ ä½ |

---

## ğŸ¯ æ ¹æœ¬åŸå› åˆ†æ

### 6.1 è®¾è®¡ä¸å®æ–½è„±èŠ‚

**é—®é¢˜**ï¼š
è®¾è®¡æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†ç³»ç»Ÿçš„å®Œæ•´åŠŸèƒ½è¦æ±‚ï¼Œä½†å®é™…å®æ–½æ—¶æ²¡æœ‰å®Œå…¨éµå¾ªè®¾è®¡è§„èŒƒã€‚

**åŸå› **ï¼š
1. **æ²Ÿé€šä¸è¶³**ï¼šè®¾è®¡æ–‡æ¡£ä¸å¼€å‘å›¢é˜Ÿä¹‹é—´çš„æ²Ÿé€šå¯èƒ½ä¸å¤Ÿå……åˆ†
2. **å®æ–½ä¼˜å…ˆçº§**ï¼šå¼€å‘æ—¶å¯èƒ½ä¼˜å…ˆå®ç°äº†æ ¸å¿ƒåŠŸèƒ½ï¼Œæ¨è¿Ÿäº†é«˜çº§åŠŸèƒ½
3. **æŠ€æœ¯é€‰å‹**ï¼šæŸäº›åŠŸèƒ½å¯èƒ½å› ä¸ºæŠ€æœ¯é€‰å‹æˆ–ä¾èµ–é—®é¢˜è€Œæœªå®ç°

### 6.2 è¯­éŸ³äº¤äº’åŠŸèƒ½ç¼ºå¤±

**é—®é¢˜**ï¼š
è®¾è®¡æ–‡æ¡£è¦æ±‚å®Œæ•´çš„è¯­éŸ³äº¤äº’ç³»ç»Ÿï¼Œä½†å®é™…å®ç°ä¸­å®Œå…¨æ²¡æœ‰ç›¸å…³ä»£ç ã€‚

**åŸå› **ï¼š
1. **æŠ€æœ¯å¤æ‚åº¦**ï¼šè¯­éŸ³è¯†åˆ«å’Œè¯­éŸ³åˆæˆæŠ€æœ¯å¤æ‚åº¦é«˜
2. **æµè§ˆå™¨å…¼å®¹æ€§**ï¼šWeb Speech APIåœ¨ä¸åŒæµè§ˆå™¨ä¸­çš„æ”¯æŒç¨‹åº¦ä¸åŒ
3. **æ€§èƒ½è€ƒè™‘**ï¼šè¯­éŸ³åŠŸèƒ½å¯èƒ½å½±å“æ•´ä½“æ€§èƒ½
4. **ä¾èµ–ç¼ºå¤±**ï¼šå¯èƒ½ç¼ºå°‘å¿…è¦çš„ç¬¬ä¸‰æ–¹åº“æˆ–æœåŠ¡

### 6.3 ä¸»é¢˜è‰²ç³»ç»Ÿæœªåº”ç”¨

**é—®é¢˜**ï¼š
è®¾è®¡æ–‡æ¡£è¯¦ç»†å®šä¹‰äº†AIè§’è‰²ä¸»é¢˜è‰²ç³»ç»Ÿï¼Œä½†å®é™…å®ç°ä¸­æ²¡æœ‰åº”ç”¨ã€‚

**åŸå› **ï¼š
1. **CSSå˜é‡æœªå®šä¹‰**ï¼šå¯èƒ½æ²¡æœ‰åœ¨å…¨å±€CSSä¸­å®šä¹‰è§’è‰²ä¸»é¢˜è‰²å˜é‡
2. **åŠ¨æ€æ ·å¼æœªå®ç°**ï¼šç»„ä»¶æ²¡æœ‰æ ¹æ®è§’è‰²åŠ¨æ€åº”ç”¨æ ·å¼
3. **è®¾è®¡è§„èŒƒæœªéµå¾ª**ï¼šå¼€å‘æ—¶å¯èƒ½æ²¡æœ‰ä¸¥æ ¼éµå¾ªè®¾è®¡è§„èŒƒ

### 6.4 åŠ¨ç”»æ•ˆæœä¸å®Œæ•´

**é—®é¢˜**ï¼š
è®¾è®¡æ–‡æ¡£è¦æ±‚å¤šç§åŠ¨ç”»æ•ˆæœï¼Œä½†å®é™…å®ç°ä¸­åªæœ‰åŸºç¡€çš„è¿‡æ¸¡æ•ˆæœã€‚

**åŸå› **ï¼š
1. **åŠ¨ç”»åº“æœªä½¿ç”¨**ï¼šå¯èƒ½æ²¡æœ‰ä½¿ç”¨åŠ¨ç”»åº“ï¼ˆå¦‚framer-motionï¼‰
2. **æ€§èƒ½è€ƒè™‘**ï¼šå¯èƒ½æ‹…å¿ƒåŠ¨ç”»å½±å“æ€§èƒ½è€Œç®€åŒ–å®ç°
3. **æ—¶é—´é™åˆ¶**ï¼šå¼€å‘æ—¶é—´å¯èƒ½ä¸è¶³ä»¥å®ç°æ‰€æœ‰åŠ¨ç”»æ•ˆæœ

### 6.5 å¼¹çª—æ§åˆ¶ç³»ç»Ÿç¼ºå¤±

**é—®é¢˜**ï¼š
è®¾è®¡æ–‡æ¡£è¦æ±‚å®Œæ•´çš„å¼¹çª—æ§åˆ¶ç³»ç»Ÿï¼Œä½†å®é™…å®ç°ä¸­æ²¡æœ‰ç›¸å…³ä»£ç ã€‚

**åŸå› **ï¼š
1. **åŠŸèƒ½ä¼˜å…ˆçº§**ï¼šå¯èƒ½ä¼˜å…ˆå®ç°äº†æ ¸å¿ƒæµ®çª—åŠŸèƒ½ï¼Œæ¨è¿Ÿäº†å¼¹çª—æ§åˆ¶
2. **æ¶æ„å¤æ‚åº¦**ï¼šå¼¹çª—æ§åˆ¶ç³»ç»Ÿå¢åŠ äº†æ¶æ„å¤æ‚åº¦
3. **å¤ç”¨æ€§è€ƒè™‘**ï¼šå¯èƒ½è®¡åˆ’ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“è€Œæœªè‡ªè¡Œå®ç°

---

## ğŸ”§ å®æ–½æŒ‘æˆ˜

### 7.1 æŠ€æœ¯æŒ‘æˆ˜

#### 7.1.1 è¯­éŸ³äº¤äº’æŠ€æœ¯æŒ‘æˆ˜

**æŒ‘æˆ˜æè¿°**ï¼š
1. **æµè§ˆå™¨å…¼å®¹æ€§**ï¼š
   - Web Speech APIåœ¨ä¸åŒæµè§ˆå™¨ä¸­çš„æ”¯æŒç¨‹åº¦ä¸åŒ
   - æŸäº›æµè§ˆå™¨ä¸æ”¯æŒè¿ç»­è¯­éŸ³è¯†åˆ«
   - è¯­éŸ³åˆæˆè´¨é‡åœ¨ä¸åŒæµè§ˆå™¨ä¸­å·®å¼‚è¾ƒå¤§

2. **æ€§èƒ½ä¼˜åŒ–**ï¼š
   - è¯­éŸ³è¯†åˆ«éœ€è¦å¤§é‡è®¡ç®—èµ„æº
   - å®æ—¶è¯­éŸ³å¤„ç†å¯èƒ½å½±å“ä¸»çº¿ç¨‹æ€§èƒ½
   - éœ€è¦ä¼˜åŒ–éŸ³é¢‘æ•°æ®å¤„ç†æµç¨‹

3. **å‡†ç¡®æ€§é—®é¢˜**ï¼š
   - è¯­éŸ³è¯†åˆ«å‡†ç¡®æ€§å—ç¯å¢ƒå½±å“ï¼ˆå™ªéŸ³ã€å£éŸ³ç­‰ï¼‰
   - éœ€è¦ä¼˜åŒ–è¯†åˆ«ç®—æ³•å’Œæ¨¡å‹
   - éœ€è¦æä¾›ç”¨æˆ·åé¦ˆå’Œæ ¡æ­£æœºåˆ¶

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ä½¿ç”¨æ¸è¿›å¢å¼ºç­–ç•¥ï¼Œä¼˜å…ˆä½¿ç”¨Web Speech APIï¼Œå›é€€åˆ°æœ¬åœ°æ¨¡å‹
2. ä½¿ç”¨Web Workerå¤„ç†éŸ³é¢‘æ•°æ®ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹
3. æä¾›è¯­éŸ³è¯†åˆ«ç»“æœé¢„è§ˆï¼Œå…è®¸ç”¨æˆ·ç¡®è®¤å’Œæ ¡æ­£

#### 7.1.2 åŠ¨ç”»æ€§èƒ½æŒ‘æˆ˜

**æŒ‘æˆ˜æè¿°**ï¼š
1. **æ€§èƒ½å½±å“**ï¼š
   - å¤æ‚åŠ¨ç”»å¯èƒ½å½±å“æ¸²æŸ“æ€§èƒ½
   - éœ€è¦ä¼˜åŒ–åŠ¨ç”»å®ç°æ–¹å¼
   - éœ€è¦ä½¿ç”¨GPUåŠ é€Ÿ

2. **å…¼å®¹æ€§é—®é¢˜**ï¼š
   - ä¸åŒæµè§ˆå™¨å¯¹åŠ¨ç”»çš„æ”¯æŒç¨‹åº¦ä¸åŒ
   - éœ€è¦æä¾›é™çº§æ–¹æ¡ˆ
   - éœ€è¦æµ‹è¯•å¤šç§è®¾å¤‡å’Œæµè§ˆå™¨

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ä½¿ç”¨CSSåŠ¨ç”»ä»£æ›¿JavaScriptåŠ¨ç”»ï¼Œåˆ©ç”¨GPUåŠ é€Ÿ
2. ä½¿ç”¨åŠ¨ç”»åº“ï¼ˆå¦‚framer-motionï¼‰ç®€åŒ–å®ç°
3. æä¾›åŠ¨ç”»å¼€å…³ï¼Œå…è®¸ç”¨æˆ·æ ¹æ®è®¾å¤‡æ€§èƒ½è°ƒæ•´

#### 7.1.3 ä¸»é¢˜è‰²ç³»ç»ŸæŒ‘æˆ˜

**æŒ‘æˆ˜æè¿°**ï¼š
1. **åŠ¨æ€æ ·å¼ç®¡ç†**ï¼š
   - éœ€è¦æ ¹æ®è§’è‰²åŠ¨æ€åº”ç”¨æ ·å¼
   - éœ€è¦ç®¡ç†å¤šä¸ªä¸»é¢˜çŠ¶æ€
   - éœ€è¦ç¡®ä¿æ ·å¼ä¸€è‡´æ€§

2. **CSSå˜é‡æ”¯æŒ**ï¼š
   - ä¸åŒæµè§ˆå™¨å¯¹CSSå˜é‡çš„æ”¯æŒç¨‹åº¦ä¸åŒ
   - éœ€è¦æä¾›é™çº§æ–¹æ¡ˆ
   - éœ€è¦æµ‹è¯•å…¼å®¹æ€§

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ä½¿ç”¨CSSå˜é‡å®šä¹‰ä¸»é¢˜è‰²ï¼Œç¡®ä¿ä¸€è‡´æ€§
2. ä½¿ç”¨styled-componentsæˆ–CSS-in-JSåº“ç®€åŒ–åŠ¨æ€æ ·å¼ç®¡ç†
3. æä¾›ä¸»é¢˜åˆ‡æ¢åŠ¨ç”»ï¼Œå¢å¼ºç”¨æˆ·ä½“éªŒ

### 7.2 æ¶æ„æŒ‘æˆ˜

#### 7.2.1 ç»„ä»¶å¤æ‚åº¦æŒ‘æˆ˜

**æŒ‘æˆ˜æè¿°**ï¼š
1. **çŠ¶æ€ç®¡ç†å¤æ‚**ï¼š
   - æµ®çª—ç»„ä»¶éœ€è¦ç®¡ç†å¤šä¸ªçŠ¶æ€
   - çŠ¶æ€ä¹‹é—´çš„ä¾èµ–å…³ç³»å¤æ‚
   - éœ€è¦ä¼˜åŒ–çŠ¶æ€æ›´æ–°é€»è¾‘

2. **äº‹ä»¶å¤„ç†å¤æ‚**ï¼š
   - éœ€è¦å¤„ç†å¤šç§ç”¨æˆ·äº¤äº’äº‹ä»¶
   - äº‹ä»¶ä¹‹é—´çš„ä¼˜å…ˆçº§å’Œå†²çªéœ€è¦å¤„ç†
   - éœ€è¦ä¼˜åŒ–äº‹ä»¶å¤„ç†æ€§èƒ½

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ä½¿ç”¨çŠ¶æ€ç®¡ç†åº“ï¼ˆå¦‚Reduxã€Zustandï¼‰ç®€åŒ–çŠ¶æ€ç®¡ç†
2. ä½¿ç”¨äº‹ä»¶æ€»çº¿æˆ–æ¶ˆæ¯é˜Ÿåˆ—ç®¡ç†äº‹ä»¶
3. æ‹†åˆ†ç»„ä»¶ï¼Œé™ä½å•ä¸ªç»„ä»¶çš„å¤æ‚åº¦

#### 7.2.2 å¯æ‰©å±•æ€§æŒ‘æˆ˜

**æŒ‘æˆ˜æè¿°**ï¼š
1. **åŠŸèƒ½æ‰©å±•å›°éš¾**ï¼š
   - å½“å‰æ¶æ„å¯èƒ½éš¾ä»¥æ·»åŠ æ–°åŠŸèƒ½
   - éœ€è¦ä¿®æ”¹å¤šä¸ªç»„ä»¶
   - å¯èƒ½å¼•å…¥æ–°çš„bug

2. **ç»´æŠ¤æˆæœ¬é«˜**ï¼š
   - ä»£ç è€¦åˆåº¦é«˜ï¼Œéš¾ä»¥ç»´æŠ¤
   - éœ€è¦é‡æ„éƒ¨åˆ†ä»£ç 
   - éœ€è¦å®Œå–„æ–‡æ¡£å’Œæµ‹è¯•

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ä½¿ç”¨æ’ä»¶åŒ–æ¶æ„ï¼Œæ”¯æŒåŠŸèƒ½æ‰©å±•
2. ä½¿ç”¨ä¾èµ–æ³¨å…¥ï¼Œé™ä½è€¦åˆåº¦
3. å®Œå–„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ï¼Œç¡®ä¿é‡æ„å®‰å…¨

### 7.3 ç”¨æˆ·ä½“éªŒæŒ‘æˆ˜

#### 7.3.1 å­¦ä¹ æˆæœ¬æŒ‘æˆ˜

**æŒ‘æˆ˜æè¿°**ï¼š
1. **åŠŸèƒ½å¤æ‚åº¦é«˜**ï¼š
   - ç”¨æˆ·éœ€è¦å­¦ä¹ å¤šç§äº¤äº’æ–¹å¼
   - åŠŸèƒ½å…¥å£ä¸ç›´è§‚
   - éœ€è¦æä¾›å¼•å¯¼å’Œå¸®åŠ©

2. **æ“ä½œæµç¨‹å¤æ‚**ï¼š
   - å®ŒæˆæŸäº›æ“ä½œéœ€è¦å¤šä¸ªæ­¥éª¤
   - æ“ä½œè·¯å¾„ä¸æ¸…æ™°
   - éœ€è¦ä¼˜åŒ–æ“ä½œæµç¨‹

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æä¾›æ–°æ‰‹å¼•å¯¼ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿä¸Šæ‰‹
2. ç®€åŒ–æ“ä½œæµç¨‹ï¼Œå‡å°‘æ“ä½œæ­¥éª¤
3. æä¾›å¿«æ·é”®å’Œæ‰‹åŠ¿æ“ä½œï¼Œæé«˜æ•ˆç‡

#### 7.3.2 å¯è®¿é—®æ€§æŒ‘æˆ˜

**æŒ‘æˆ˜æè¿°**ï¼š
1. **å±å¹•é˜…è¯»å™¨æ”¯æŒ**ï¼š
   - éœ€è¦æä¾›ARIAå±æ€§
   - éœ€è¦ç¡®ä¿å†…å®¹å¯è¯»
   - éœ€è¦æµ‹è¯•å±å¹•é˜…è¯»å™¨å…¼å®¹æ€§

2. **é”®ç›˜å¯¼èˆªæ”¯æŒ**ï¼š
   - éœ€è¦æ”¯æŒé”®ç›˜æ“ä½œ
   - éœ€è¦æä¾›ç„¦ç‚¹ç®¡ç†
   - éœ€è¦æµ‹è¯•é”®ç›˜å¯¼èˆªæµç•…æ€§

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ä½¿ç”¨è¯­ä¹‰åŒ–HTMLï¼Œæä¾›ARIAå±æ€§
2. å®ç°é”®ç›˜å¯¼èˆªï¼Œæä¾›ç„¦ç‚¹ç®¡ç†
3. è¿›è¡Œå¯è®¿é—®æ€§æµ‹è¯•ï¼Œç¡®ä¿ç¬¦åˆWCAGæ ‡å‡†

---

## ğŸ’¡ æ”¹è¿›å»ºè®®

### 8.1 é«˜ä¼˜å…ˆçº§æ”¹è¿›

#### 8.1.1 å®ç°è¯­éŸ³äº¤äº’åŠŸèƒ½

**å»ºè®®**ï¼š
1. **å®ç°è¯­éŸ³è¯†åˆ«**ï¼š
   ```typescript
   // åˆ›å»ºVoiceRecognitionç»„ä»¶
   export const VoiceRecognition: React.FC<VoiceRecognitionProps> = ({
     onResult,
     onError,
     continuous = false,
     lang = 'zh-CN',
   }) => {
     const [isListening, setIsListening] = useState(false);

     useEffect(() => {
       const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
       if (!SpeechRecognition) {
         console.warn('æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«');
         return;
       }

       const recognition = new SpeechRecognition();
       recognition.continuous = continuous;
       recognition.interimResults = true;
       recognition.lang = lang;

       recognition.onresult = (event) => {
         const result = event.results[event.results.length - 1][0].transcript;
         onResult?.(result);
       };

       recognition.onerror = (event) => {
         console.error('è¯­éŸ³è¯†åˆ«é”™è¯¯:', event.error);
         onError?.(new Error(event.error));
       };

       return () => {
         recognition.stop();
       };
     }, [continuous, lang, onResult, onError]);

     const toggleListening = () => {
       setIsListening(!isListening);
       // å®ç°å¼€å§‹/åœæ­¢é€»è¾‘...
     };

     return (
       <Button onClick={toggleListening}>
         {isListening ? 'åœæ­¢å½•éŸ³' : 'å¼€å§‹å½•éŸ³'}
       </Button>
     );
   };
   ```

2. **å®ç°è¯­éŸ³åˆæˆ**ï¼š
   ```typescript
   // åˆ›å»ºVoiceSynthesisç»„ä»¶
   export const VoiceSynthesis: React.FC<VoiceSynthesisProps> = ({
     text,
     onEnd,
     onError,
   }) => {
     useEffect(() => {
       if (!text) return;

       const utterance = new SpeechSynthesisUtterance(text);
       utterance.lang = 'zh-CN';
       utterance.rate = 1;
       utterance.pitch = 1;

       utterance.onend = () => onEnd?.();
       utterance.onerror = (event) => onError?.(event.error);

       window.speechSynthesis.speak(utterance);

       return () => {
         window.speechSynthesis.cancel();
       };
     }, [text, onEnd, onError]);

     return null;
   };
   ```

3. **é›†æˆåˆ°æµ®çª—**ï¼š
   ```typescript
   // åœ¨IntelligentAIWidgetä¸­é›†æˆè¯­éŸ³åŠŸèƒ½
   const [isListening, setIsListening] = useState(false);

   const handleVoiceResult = useCallback((result: string) => {
     setInputValue(result);
   }, []);

   const handleVoiceEnd = useCallback(() => {
     setIsListening(false);
     // è‡ªåŠ¨å‘é€æ¶ˆæ¯
     if (inputValue.trim()) {
       handleSendMessage(inputValue);
     }
   }, [inputValue, handleSendMessage]);

   // åœ¨è¾“å…¥åŒºåŸŸæ·»åŠ è¯­éŸ³æŒ‰é’®
   <div className='input-area'>
     <Textarea
       value={inputValue}
       onChange={e => setInputValue(e.target.value)}
       placeholder='è¾“å…¥æ¶ˆæ¯æˆ–ä½¿ç”¨è¯­éŸ³...'
     />
     <VoiceRecognition
       onResult={handleVoiceResult}
       onEnd={handleVoiceEnd}
     />
     <Button onClick={() => handleSendMessage(inputValue)}>
       å‘é€
     </Button>
   </div>
   ```

**é¢„æœŸæ”¶ç›Š**ï¼š
- æå‡ç”¨æˆ·ä½“éªŒï¼Œæ”¯æŒè¯­éŸ³äº¤äº’
- ç¬¦åˆè®¾è®¡æ–‡æ¡£è¦æ±‚
- å¢å¼ºç³»ç»ŸåŠŸèƒ½å®Œæ•´æ€§

#### 8.1.2 åº”ç”¨AIè§’è‰²ä¸»é¢˜è‰²ç³»ç»Ÿ

**å»ºè®®**ï¼š
1. **å®šä¹‰CSSå˜é‡**ï¼š
   ```css
   /* åœ¨globals.cssä¸­å®šä¹‰è§’è‰²ä¸»é¢˜è‰² */
   :root {
     /* é™ªä¼´è€… - Companion */
     --companion-primary: #FF4D6D;
     --companion-gradient: linear-gradient(135deg, #FF4D6D, #FF758F);
     --companion-secondary: #FFB3C1;
     --companion-bg: #FFF0F3;
     --companion-text: #8B1E3D;

     /* è®°å½•è€… - Recorder */
     --recorder-primary: #4D96FF;
     --recorder-gradient: linear-gradient(135deg, #4D96FF, #6BA3FF);
     --recorder-secondary: #A3C2FF;
     --recorder-bg: #F0F7FF;
     --recorder-text: #1E3A8A;

     /* å®ˆæŠ¤è€… - Guardian */
     --guardian-primary: #10B981;
     --guardian-gradient: linear-gradient(135deg, #10B981, #34D399);
     --guardian-secondary: #6EE7B7;
     --guardian-bg: #ECFDF5;
     --guardian-text: #064E3B;

     /* è†å¬è€… - Listener */
     --listener-primary: #8B5CF6;
     --listener-gradient: linear-gradient(135deg, #8B5CF6, #A78BFA);
     --listener-secondary: #C4B5FD;
     --listener-bg: #F5F3FF;
     --listener-text: #4C1D95;

     /* å»ºè®®è€… - Advisor */
     --advisor-primary: #F59E0B;
     --advisor-gradient: linear-gradient(135deg, #F59E0B, #FBBF24);
     --advisor-secondary: #FCD34D;
     --advisor-bg: #FFFBEB;
     --advisor-text: #78350F;
   }
   ```

2. **åŠ¨æ€åº”ç”¨ä¸»é¢˜è‰²**ï¼š
   ```typescript
   // åœ¨IntelligentAIWidgetä¸­åŠ¨æ€åº”ç”¨ä¸»é¢˜è‰²
   const getRoleTheme = (role: AIRole) => {
     const themeMap = {
       companion: {
         primary: 'var(--companion-primary)',
         gradient: 'var(--companion-gradient)',
         secondary: 'var(--companion-secondary)',
         bg: 'var(--companion-bg)',
         text: 'var(--companion-text)',
       },
       recorder: {
         primary: 'var(--recorder-primary)',
         gradient: 'var(--recorder-gradient)',
         secondary: 'var(--recorder-secondary)',
         bg: 'var(--recorder-bg)',
         text: 'var(--recorder-text)',
       },
       guardian: {
         primary: 'var(--guardian-primary)',
         gradient: 'var(--guardian-gradient)',
         secondary: 'var(--guardian-secondary)',
         bg: 'var(--guardian-bg)',
         text: 'var(--guardian-text)',
       },
       listener: {
         primary: 'var(--listener-primary)',
         gradient: 'var(--listener-gradient)',
         secondary: 'var(--listener-secondary)',
         bg: 'var(--listener-bg)',
         text: 'var(--listener-text)',
       },
       advisor: {
         primary: 'var(--advisor-primary)',
         gradient: 'var(--advisor-gradient)',
         secondary: 'var(--advisor-secondary)',
         bg: 'var(--advisor-bg)',
         text: 'var(--advisor-text)',
       },
     };
     return themeMap[role];
   };

   // åº”ç”¨ä¸»é¢˜è‰²åˆ°å¤´éƒ¨
   const currentTheme = getRoleTheme(currentRole);
   <div
     className='widget-header'
     style={{
       background: currentTheme.gradient,
       color: currentTheme.text,
     }}
   >
     {/* å¤´éƒ¨å†…å®¹ */}
   </div>

   // åº”ç”¨ä¸»é¢˜è‰²åˆ°æ¶ˆæ¯æ°”æ³¡
   <div
     className={`message-content ${message.role}`}
     style={{
       background: message.role === 'user'
         ? currentTheme.primary
         : currentTheme.bg,
       color: message.role === 'user'
         ? '#ffffff'
         : currentTheme.text,
     }}
   >
     {message.content}
   </div>
   ```

**é¢„æœŸæ”¶ç›Š**ï¼š
- æå‡è§†è§‰ä¸€è‡´æ€§ï¼Œç¬¦åˆè®¾è®¡è§„èŒƒ
- å¢å¼ºç”¨æˆ·ä½“éªŒï¼Œè§’è‰²åˆ‡æ¢æ—¶è§†è§‰åé¦ˆæ˜æ˜¾
- æé«˜ç³»ç»Ÿå¯ç»´æŠ¤æ€§ï¼Œä¸»é¢˜è‰²é›†ä¸­ç®¡ç†

#### 8.1.3 å®ç°å®Œæ•´åŠ¨ç”»æ•ˆæœ

**å»ºè®®**ï¼š
1. **ä½¿ç”¨framer-motionåº“**ï¼š
   ```typescript
   import { motion, AnimatePresence } from 'framer-motion';

   // æµ®çª—æ˜¾ç¤º/éšè—åŠ¨ç”»
   <AnimatePresence>
     {state.isVisible && (
       <motion.div
         className='ai-widget'
         initial={{ opacity: 0, scale: 0.9 }}
         animate={{ opacity: 1, scale: 1 }}
         exit={{ opacity: 0, scale: 0.9 }}
         transition={{ duration: 0.3 }}
       >
         {/* æµ®çª—å†…å®¹ */}
       </motion.div>
     )}
   </AnimatePresence>

   // æ¶ˆæ¯æ·¡å…¥åŠ¨ç”»
   <motion.div
     className='message-content'
     initial={{ opacity: 0, y: 20 }}
     animate={{ opacity: 1, y: 0 }}
     transition={{ duration: 0.3 }}
   >
     {message.content}
   </motion.div>

   // é€šçŸ¥å¾½ç« å‘¼å¸åŠ¨ç”»
   <motion.div
     className='notification-badge'
     animate={{
       scale: [1, 1.05, 1],
       opacity: [1, 0.8, 1],
     }}
     transition={{
       duration: 3,
       repeat: Infinity,
       ease: 'easeInOut',
     }}
   >
     {unreadCount}
   </motion.div>
   ```

2. **CSSåŠ¨ç”»è¡¥å……**ï¼š
   ```css
   /* åœ¨IntelligentAIWidget.cssä¸­æ·»åŠ åŠ¨ç”» */
   @keyframes fadeIn {
     from { opacity: 0; transform: scale(0.9); }
     to { opacity: 1; transform: scale(1); }
   }

   @keyframes slideIn {
     from { transform: translateY(-20px); opacity: 0; }
     to { transform: translateY(0); opacity: 1; }
   }

   @keyframes scaleIn {
     from { transform: scale(0.8); opacity: 0; }
     to { transform: scale(1); opacity: 1; }
   }

   .ai-widget {
     animation: fadeIn 0.3s ease-out;
   }

   .message-content {
     animation: slideIn 0.3s ease-out;
   }

   .notification-badge {
     animation: pulse 3s ease-in-out infinite;
   }
   ```

**é¢„æœŸæ”¶ç›Š**ï¼š
- æå‡ç”¨æˆ·ä½“éªŒï¼ŒåŠ¨ç”»æ•ˆæœæ›´æµç•…
- ç¬¦åˆè®¾è®¡æ–‡æ¡£è¦æ±‚
- å¢å¼ºç³»ç»Ÿä¸“ä¸šæ„Ÿ

### 8.2 ä¸­ä¼˜å…ˆçº§æ”¹è¿›

#### 8.2.1 å®ç°å¼¹çª—æ§åˆ¶ç³»ç»Ÿ

**å»ºè®®**ï¼š
1. **åˆ›å»ºPopupManager**ï¼š
   ```typescript
   // åˆ›å»ºPopupManagerç±»
   export class PopupManager {
     private popups: Map<string, PopupOptions> = new Map();
     private zIndexCounter: number = 1000;

     public showPopup(options: PopupOptions): string {
       const id = options.id || `popup-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;

       const popupOptions: PopupOptions = {
         type: 'modal',
         position: 'center',
         size: 'md',
         animation: 'fade',
         closable: true,
         backdrop: true,
         ...options,
       };

       this.popups.set(id, popupOptions);
       this.emitPopupEvent('show', { id, options: popupOptions });

       return id;
     }

     public hidePopup(id: string): void {
       if (!this.popups.has(id)) return;

       this.emitPopupEvent('hide', { id });
       this.popups.delete(id);
     }

     public hideAllPopups(): void {
       for (const id of this.popups.keys()) {
         this.hidePopup(id);
       }
     }

     private emitPopupEvent(event: string, data: any): void {
       const popupEvent = new CustomEvent(`popup:${event}`, { detail: data });
       window.dispatchEvent(popupEvent);
     }
   }

   // åˆ›å»ºå…¨å±€å®ä¾‹
   export const popupManager = new PopupManager();
   ```

2. **åˆ›å»ºPopupç»„ä»¶**ï¼š
   ```typescript
   // åˆ›å»ºPopupç»„ä»¶
   export const Popup: React.FC<PopupProps> = ({
     id,
     type = 'modal',
     title,
     content,
     position = 'center',
     size = 'md',
     animation = 'fade',
     closable = true,
     backdrop = true,
     onClose,
     onConfirm,
     onCancel,
   }) => {
     const [isVisible, setIsVisible] = useState(true);

     useEffect(() => {
       const handlePopupEvent = (event: CustomEvent) => {
         if (event.detail.id === id && event.detail.event === 'hide') {
           setIsVisible(false);
         }
       };

       window.addEventListener(`popup:hide`, handlePopupEvent as EventListener);
       return () => {
         window.removeEventListener(`popup:hide`, handlePopupEvent as EventListener);
       };
     }, [id]);

     if (!isVisible) return null;

     return (
       <div className={`popup popup-${type} popup-${position} popup-${size}`}>
         {backdrop && (
           <div className='popup-backdrop' onClick={onClose} />
         )}
         <div className={`popup-content popup-animation-${animation}`}>
           {title && (
             <div className='popup-header'>
               <h3>{title}</h3>
               {closable && (
                 <button onClick={onClose}>Ã—</button>
               )}
             </div>
           )}
           <div className='popup-body'>{content}</div>
           {(onConfirm || onCancel) && (
             <div className='popup-footer'>
               {onCancel && (
                 <button onClick={onCancel}>å–æ¶ˆ</button>
               )}
               {onConfirm && (
                 <button onClick={onConfirm}>ç¡®è®¤</button>
               )}
             </div>
           )}
         </div>
       </div>
     );
   };
   ```

**é¢„æœŸæ”¶ç›Š**ï¼š
- æä¾›ç»Ÿä¸€çš„å¼¹çª—ç®¡ç†
- æ”¯æŒå¤šç§å¼¹çª—ç±»å‹å’ŒåŠ¨ç”»
- ç¬¦åˆè®¾è®¡æ–‡æ¡£è¦æ±‚

#### 8.2.2 å®ç°æ€§èƒ½ç›‘æ§

**å»ºè®®**ï¼š
1. **åˆ›å»ºPerformanceMonitor**ï¼š
   ```typescript
   // åˆ›å»ºæ€§èƒ½ç›‘æ§å·¥å…·
   export class PerformanceMonitor {
     private metrics: Map<string, number[]> = new Map();

     public startMeasure(name: string): void {
       performance.mark(`${name}-start`);
     }

     public endMeasure(name: string): number {
       performance.mark(`${name}-end`);
       performance.measure(name, `${name}-start`, `${name}-end`);

       const measure = performance.getEntriesByName(name)[0];
       const duration = measure.duration;

       if (!this.metrics.has(name)) {
         this.metrics.set(name, []);
       }
       this.metrics.get(name)!.push(duration);

       return duration;
     }

     public getAverage(name: string): number {
       const values = this.metrics.get(name);
       if (!values || values.length === 0) return 0;

       const sum = values.reduce((a, b) => a + b, 0);
       return sum / values.length;
     }

     public getMetrics(): Record<string, number> {
       const result: Record<string, number> = {};
       for (const [name, values] of this.metrics.entries()) {
         result[name] = this.getAverage(name);
       }
       return result;
     }
   }

   // åˆ›å»ºå…¨å±€å®ä¾‹
   export const performanceMonitor = new PerformanceMonitor();
   ```

2. **é›†æˆåˆ°æµ®çª—**ï¼š
   ```typescript
   // åœ¨IntelligentAIWidgetä¸­é›†æˆæ€§èƒ½ç›‘æ§
   useEffect(() => {
     performanceMonitor.startMeasure('widget-init');

     return () => {
       performanceMonitor.endMeasure('widget-init');
     };
   }, []);

   useEffect(() => {
     if (state.isVisible) {
       performanceMonitor.startMeasure('widget-show');
     }
     return () => {
       if (state.isVisible) {
         performanceMonitor.endMeasure('widget-show');
       }
     };
   }, [state.isVisible]);

   // å®šæœŸæŠ¥å‘Šæ€§èƒ½æŒ‡æ ‡
   useEffect(() => {
     const interval = setInterval(() => {
       const metrics = performanceMonitor.getMetrics();
       console.log('æ€§èƒ½æŒ‡æ ‡:', metrics);
     }, 60000); // æ¯åˆ†é’ŸæŠ¥å‘Šä¸€æ¬¡

     return () => clearInterval(interval);
   }, []);
   ```

**é¢„æœŸæ”¶ç›Š**ï¼š
- å®æ—¶ç›‘æ§æ€§èƒ½æŒ‡æ ‡
- åŠæ—¶å‘ç°æ€§èƒ½é—®é¢˜
- ç¬¦åˆè®¾è®¡æ–‡æ¡£è¦æ±‚

### 8.3 ä½ä¼˜å…ˆçº§æ”¹è¿›

#### 8.3.1 ä¼˜åŒ–å“åº”å¼è®¾è®¡

**å»ºè®®**ï¼š
1. **æ ¹æ®è®¾å¤‡å°ºå¯¸è°ƒæ•´æµ®çª—å¤§å°**ï¼š
   ```typescript
   // åˆ›å»ºå“åº”å¼é…ç½®
   const responsiveConfig = {
     sm: {
       floatWindowSize: { width: 60, height: 60 },
       expandedSize: { width: '100vw', height: '100vh' },
     },
     md: {
       floatWindowSize: { width: 70, height: 70 },
       expandedSize: { width: 350, height: 500 },
     },
     lg: {
       floatWindowSize: { width: 80, height: 80 },
       expandedSize: { width: 400, height: 600 },
     },
   };

   // æ ¹æ®è®¾å¤‡å°ºå¯¸åº”ç”¨é…ç½®
   const getResponsiveConfig = () => {
     const width = window.innerWidth;
     if (width < 640) return responsiveConfig.sm;
     if (width < 1024) return responsiveConfig.md;
     return responsiveConfig.lg;
   };

   // åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
   const config = getResponsiveConfig();
   <div
     style={{
       width: state.isExpanded ? config.expandedSize.width : config.floatWindowSize.width,
       height: state.isExpanded ? config.expandedSize.height : config.floatWindowSize.height,
     }}
   >
     {/* æµ®çª—å†…å®¹ */}
   </div>
   ```

**é¢„æœŸæ”¶ç›Š**ï¼š
- æå‡ç§»åŠ¨ç«¯ä½“éªŒ
- ç¬¦åˆè®¾è®¡æ–‡æ¡£è¦æ±‚
- å¢å¼ºç³»ç»Ÿå¯ç”¨æ€§

#### 8.3.2 å®Œå–„é”™è¯¯å¤„ç†

**å»ºè®®**ï¼š
1. **åˆ›å»ºé”™è¯¯åˆ†ç±»å’Œå¤„ç†ç­–ç•¥**ï¼š
   ```typescript
   // åˆ›å»ºé”™è¯¯ç±»å‹
   export enum ErrorType {
     NETWORK_ERROR = 'NETWORK_ERROR',
     API_ERROR = 'API_ERROR',
     VALIDATION_ERROR = 'VALIDATION_ERROR',
     PERMISSION_ERROR = 'PERMISSION_ERROR',
     UNKNOWN_ERROR = 'UNKNOWN_ERROR',
   }

   // åˆ›å»ºé”™è¯¯å¤„ç†å™¨
   export class ErrorHandler {
     public static handleError(error: Error): void {
       const errorType = this.classifyError(error);

       switch (errorType) {
         case ErrorType.NETWORK_ERROR:
           this.showNetworkError(error);
           break;
         case ErrorType.API_ERROR:
           this.showAPIError(error);
           break;
         case ErrorType.VALIDATION_ERROR:
           this.showValidationError(error);
           break;
         case ErrorType.PERMISSION_ERROR:
           this.showPermissionError(error);
           break;
         default:
           this.showUnknownError(error);
       }
     }

     private static classifyError(error: Error): ErrorType {
       // æ ¹æ®é”™è¯¯ä¿¡æ¯åˆ†ç±»
       if (error.message.includes('network')) {
         return ErrorType.NETWORK_ERROR;
       }
       if (error.message.includes('api')) {
         return ErrorType.API_ERROR;
       }
       if (error.message.includes('validation')) {
         return ErrorType.VALIDATION_ERROR;
       }
       if (error.message.includes('permission')) {
         return ErrorType.PERMISSION_ERROR;
       }
       return ErrorType.UNKNOWN_ERROR;
     }

     private static showNetworkError(error: Error): void {
       // æ˜¾ç¤ºç½‘ç»œé”™è¯¯æç¤º
     }

     private static showAPIError(error: Error): void {
       // æ˜¾ç¤ºAPIé”™è¯¯æç¤º
     }

     private static showValidationError(error: Error): void {
       // æ˜¾ç¤ºéªŒè¯é”™è¯¯æç¤º
     }

     private static showPermissionError(error: Error): void {
       // æ˜¾ç¤ºæƒé™é”™è¯¯æç¤º
     }

     private static showUnknownError(error: Error): void {
       // æ˜¾ç¤ºæœªçŸ¥é”™è¯¯æç¤º
     }
   }

   // åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
   try {
     // æ‰§è¡Œæ“ä½œ
   } catch (error) {
     ErrorHandler.handleError(error as Error);
   }
   ```

**é¢„æœŸæ”¶ç›Š**ï¼š
- æå‡é”™è¯¯å¤„ç†èƒ½åŠ›
- æä¾›æ›´å¥½çš„ç”¨æˆ·åé¦ˆ
- å¢å¼ºç³»ç»Ÿç¨³å®šæ€§

---

## ğŸ“Š ä¼˜å…ˆçº§çŸ©é˜µ

### 9.1 æ”¹è¿›ä¼˜å…ˆçº§è¯„ä¼°

| æ”¹è¿›é¡¹ | ä¼˜å…ˆçº§ | å·¥ä½œé‡ | é¢„æœŸæ”¶ç›Š | ROI |
|--------|--------|--------|----------|-----|
| å®ç°è¯­éŸ³äº¤äº’åŠŸèƒ½ | ğŸ”´ é«˜ | å¤§ | é«˜ | é«˜ |
| åº”ç”¨AIè§’è‰²ä¸»é¢˜è‰²ç³»ç»Ÿ | ğŸ”´ é«˜ | ä¸­ | é«˜ | é«˜ |
| å®ç°å®Œæ•´åŠ¨ç”»æ•ˆæœ | ğŸŸ¡ ä¸­ | ä¸­ | ä¸­ | ä¸­ |
| å®ç°å¼¹çª—æ§åˆ¶ç³»ç»Ÿ | ğŸŸ¡ ä¸­ | å¤§ | ä¸­ | ä¸­ |
| å®ç°æ€§èƒ½ç›‘æ§ | ğŸŸ¡ ä¸­ | å° | ä¸­ | é«˜ |
| ä¼˜åŒ–å“åº”å¼è®¾è®¡ | ğŸŸ¢ ä½ | ä¸­ | ä½ | ä½ |
| å®Œå–„é”™è¯¯å¤„ç† | ğŸŸ¢ ä½ | å° | ä½ | ä½ |

### 9.2 å®æ–½å»ºè®®

**ç¬¬ä¸€é˜¶æ®µï¼ˆ1-2å‘¨ï¼‰**ï¼š
1. å®ç°è¯­éŸ³äº¤äº’åŠŸèƒ½
2. åº”ç”¨AIè§’è‰²ä¸»é¢˜è‰²ç³»ç»Ÿ

**ç¬¬äºŒé˜¶æ®µï¼ˆ2-3å‘¨ï¼‰**ï¼š
1. å®ç°å®Œæ•´åŠ¨ç”»æ•ˆæœ
2. å®ç°å¼¹çª—æ§åˆ¶ç³»ç»Ÿ

**ç¬¬ä¸‰é˜¶æ®µï¼ˆ1-2å‘¨ï¼‰**ï¼š
1. å®ç°æ€§èƒ½ç›‘æ§
2. ä¼˜åŒ–å“åº”å¼è®¾è®¡
3. å®Œå–„é”™è¯¯å¤„ç†

---

## ğŸ“ è”ç³»ä¿¡æ¯

### å›¢é˜Ÿè”ç³»æ–¹å¼

- **æŠ€æœ¯æ”¯æŒ**ï¼š<admin@0379.email>
- **é—®é¢˜åé¦ˆ**ï¼šGitHub Issues
- **æ–‡æ¡£æ›´æ–°**ï¼š<admin@0379.email>

---

## ğŸ“„ æ–‡æ¡£æ ‡å°¾

> ã€Œ***YYCÂ³ï¼ˆYanYu Cloud Cubeï¼‰***ã€
> ã€Œ***<admin@0379.email>***ã€
> ã€Œ***All Realms Converge at Cloud Nexus, DeepStack Ignites a New Era***ã€
> ã€Œ***Words Initiate Quadrants, Language Serves as Core for the Future***ã€
