---
@file: 15-YYC3-XY-测试类-AI浮窗核心功能验证测试计划.md
@description: YYC³ AI浮窗系统核心功能验证测试计划，包含功能验证、角色切换测试、性能测试和稳定性测试
@author: YYC³
@version: 1.0.0
@created: 2026-01-19
@updated: 2026-01-19
@status: in_progress
@tags: [测试, AI浮窗, 功能验证, 角色切换, 性能测试]
---

# 15-YYC3-XY-测试类-AI浮窗核心功能验证测试计划

> **YYC³（YanYu Cloud Cube）**
> **标语**：万象归元于云枢 | 深栈智启新纪元
> ***英文***：*All Realms Converge at Cloud Nexus, DeepStack Ignites a New Era*

---

## 📋 测试概述

### 1.1 测试目标

本测试计划旨在全面验证AI浮窗系统的核心功能，确保系统稳定性和用户体验达到预期标准。

### 1.2 测试范围

- AI浮窗核心组件功能验证
- 五大AI功能角色切换和交互测试
- 系统性能指标验证
- 稳定性和可靠性测试

### 1.3 测试环境

- **前端服务**：http://localhost:3000
- **后端服务**：http://localhost:3201
- **浏览器**：Chrome、Firefox、Safari、Edge
- **设备**：桌面端、移动端

---

## 🧪 测试用例

### 2.1 AI浮窗核心功能测试

#### TC-001: 浮窗显示和隐藏

**测试步骤**：
1. 访问首页（http://localhost:3000）
2. 检查AI浮窗是否默认显示
3. 点击最小化按钮
4. 检查浮窗是否收起
5. 点击浮窗图标
6. 检查浮窗是否展开

**预期结果**：
- 浮窗默认显示在页面右下角
- 点击最小化按钮后浮窗收起
- 点击浮窗图标后浮窗展开
- 浮窗显示/隐藏动画流畅

**实际结果**：待测试
**状态**：⏳ 待测试

---

#### TC-002: 浮窗拖拽功能

**测试步骤**：
1. 鼠标悬停在浮窗头部
2. 按住鼠标左键拖拽浮窗
3. 释放鼠标
4. 检查浮窗位置是否固定

**预期结果**：
- 鼠标悬停时显示拖拽光标
- 拖拽过程中浮窗跟随鼠标移动
- 释放鼠标后浮窗位置固定
- 拖拽过程流畅无卡顿

**实际结果**：待测试
**状态**：⏳ 待测试

---

#### TC-003: 浮窗全屏模式

**测试步骤**：
1. 点击全屏按钮
2. 检查浮窗是否进入全屏模式
3. 点击退出全屏按钮
4. 检查浮窗是否返回正常模式

**预期结果**：
- 点击全屏按钮后浮窗进入全屏模式
- 全屏模式下浮窗占据整个屏幕
- 点击退出全屏按钮后浮窗返回正常模式
- 全屏切换动画流畅

**实际结果**：待测试
**状态**：⏳ 待测试

---

#### TC-004: 消息发送和接收

**测试步骤**：
1. 在输入框中输入测试消息
2. 点击发送按钮
3. 检查消息是否显示在对话区域
4. 等待AI响应
5. 检查AI响应是否显示

**预期结果**：
- 输入的消息显示在对话区域
- 消息显示发送时间戳
- AI响应在合理时间内返回（< 2秒）
- AI响应显示在对话区域
- 对话区域自动滚动到最新消息

**实际结果**：待测试
**状态**：⏳ 待测试

---

### 2.2 AI角色系统测试

#### TC-005: 角色切换功能

**测试步骤**：
1. 查看当前显示的角色
2. 点击不同的角色按钮（陪伴者、记录者、守护者、聆听者、建议者）
3. 检查角色是否成功切换
4. 检查角色主题色是否更新
5. 检查角色图标是否更新

**预期结果**：
- 点击角色按钮后角色成功切换
- 角色主题色正确更新（陪伴者：粉红色、记录者：蓝色、守护者：绿色、聆听者：紫色、建议者：橙色）
- 角色图标正确更新
- 角色切换通知显示

**实际结果**：待测试
**状态**：⏳ 待测试

---

#### TC-006: 角色响应测试

**测试步骤**：
1. 切换到陪伴者角色
2. 发送情感相关消息（如"我感到很孤独"）
3. 检查AI响应是否符合陪伴者角色特点
4. 切换到建议者角色
5. 发送教育相关消息（如"如何培养孩子的阅读习惯"）
6. 检查AI响应是否符合建议者角色特点

**预期结果**：
- 陪伴者角色响应温暖、有情感支持
- 建议者角色响应专业、有具体建议
- AI响应符合当前角色的系统提示词
- AI响应长度符合角色配置

**实际结果**：待测试
**状态**：⏳ 待测试

---

#### TC-007: 角色关键词触发

**测试步骤**：
1. 发送包含陪伴者关键词的消息（如"陪伴"、"聊天"、"无聊"）
2. 检查是否自动切换到陪伴者角色
3. 发送包含记录者关键词的消息（如"记录"、"保存"、"成长"）
4. 检查是否自动切换到记录者角色
5. 发送包含守护者关键词的消息（如"安全"、"风险"、"危险"）
6. 检查是否自动切换到守护者角色

**预期结果**：
- 包含陪伴者关键词的消息自动切换到陪伴者角色
- 包含记录者关键词的消息自动切换到记录者角色
- 包含守护者关键词的消息自动切换到守护者角色
- 角色切换通知显示

**实际结果**：待测试
**状态**：⏳ 待测试

---

### 2.3 性能测试

#### TC-008: 浮窗启动时间

**测试步骤**：
1. 清除浏览器缓存
2. 访问首页
3. 记录浮窗完全显示的时间
4. 重复测试5次
5. 计算平均启动时间

**预期结果**：
- 浮窗启动时间 < 500ms
- 平均启动时间 < 400ms
- 启动过程流畅无卡顿

**实际结果**：待测试
**状态**：⏳ 待测试

---

#### TC-009: 消息响应时间

**测试步骤**：
1. 发送测试消息
2. 记录从发送到收到AI响应的时间
3. 重复测试10次
4. 计算平均响应时间

**预期结果**：
- 消息响应时间 < 2秒
- 平均响应时间 < 1.5秒
- 响应时间稳定，波动范围 < 500ms

**实际结果**：待测试
**状态**：⏳ 待测试

---

#### TC-010: 浮窗渲染性能

**测试步骤**：
1. 打开浏览器开发者工具
2. 切换到Performance标签
3. 执行浮窗展开/收起操作
4. 记录渲染时间
5. 执行角色切换操作
6. 记录渲染时间

**预期结果**：
- 浮窗展开/收起渲染时间 < 200ms
- 角色切换渲染时间 < 100ms
- 渲染过程流畅，帧率 > 60fps

**实际结果**：待测试
**状态**：⏳ 待测试

---

### 2.4 稳定性测试

#### TC-011: 长时间运行测试

**测试步骤**：
1. 打开AI浮窗
2. 持续发送消息30分钟
3. 检查系统是否稳定运行
4. 检查内存使用情况
5. 检查是否有内存泄漏

**预期结果**：
- 系统稳定运行30分钟无崩溃
- 内存使用稳定，无持续增长
- 无内存泄漏现象
- 响应时间保持稳定

**实际结果**：待测试
**状态**：⏳ 待测试

---

#### TC-012: 并发操作测试

**测试步骤**：
1. 快速连续发送10条消息
2. 检查所有消息是否正确处理
3. 快速连续切换角色10次
4. 检查角色切换是否正常
5. 快速连续展开/收起浮窗10次
6. 检查浮窗操作是否正常

**预期结果**：
- 所有消息正确处理，无遗漏
- 角色切换正常，无卡顿
- 浮窗操作正常，无卡顿
- 无错误或异常

**实际结果**：待测试
**状态**：⏳ 待测试

---

#### TC-013: 错误处理测试

**测试步骤**：
1. 断开网络连接
2. 发送消息
3. 检查错误提示是否显示
4. 恢复网络连接
5. 检查系统是否恢复正常
6. 发送超长消息（> 10000字符）
7. 检查系统是否正确处理

**预期结果**：
- 断网时显示友好的错误提示
- 恢复网络后系统正常工作
- 超长消息被正确处理或提示
- 无系统崩溃或异常

**实际结果**：待测试
**状态**：⏳ 待测试

---

### 2.5 兼容性测试

#### TC-014: 浏览器兼容性

**测试步骤**：
1. 在Chrome浏览器中测试所有功能
2. 在Firefox浏览器中测试所有功能
3. 在Safari浏览器中测试所有功能
4. 在Edge浏览器中测试所有功能

**预期结果**：
- 所有功能在Chrome中正常工作
- 所有功能在Firefox中正常工作
- 所有功能在Safari中正常工作
- 所有功能在Edge中正常工作

**实际结果**：待测试
**状态**：⏳ 待测试

---

#### TC-015: 设备兼容性

**测试步骤**：
1. 在桌面端测试所有功能
2. 在平板端测试所有功能
3. 在手机端测试所有功能

**预期结果**：
- 所有功能在桌面端正常工作
- 所有功能在平板端正常工作
- 所有功能在手机端正常工作
- 响应式布局正确

**实际结果**：待测试
**状态**：⏳ 待测试

---

## 📊 测试结果汇总

### 3.1 测试执行状态

| 测试用例ID | 测试名称 | 状态 | 执行时间 | 结果 |
|------------|----------|------|----------|------|
| TC-001 | 浮窗显示和隐藏 | ⏳ 待测试 | - | - |
| TC-002 | 浮窗拖拽功能 | ⏳ 待测试 | - | - |
| TC-003 | 浮窗全屏模式 | ⏳ 待测试 | - | - |
| TC-004 | 消息发送和接收 | ⏳ 待测试 | - | - |
| TC-005 | 角色切换功能 | ⏳ 待测试 | - | - |
| TC-006 | 角色响应测试 | ⏳ 待测试 | - | - |
| TC-007 | 角色关键词触发 | ⏳ 待测试 | - | - |
| TC-008 | 浮窗启动时间 | ⏳ 待测试 | - | - |
| TC-009 | 消息响应时间 | ⏳ 待测试 | - | - |
| TC-010 | 浮窗渲染性能 | ⏳ 待测试 | - | - |
| TC-011 | 长时间运行测试 | ⏳ 待测试 | - | - |
| TC-012 | 并发操作测试 | ⏳ 待测试 | - | - |
| TC-013 | 错误处理测试 | ⏳ 待测试 | - | - |
| TC-014 | 浏览器兼容性 | ⏳ 待测试 | - | - |
| TC-015 | 设备兼容性 | ⏳ 待测试 | - | - |

### 3.2 测试统计

- **总测试用例数**：15
- **已执行**：0
- **通过**：0
- **失败**：0
- **阻塞**：0
- **待测试**：15

### 3.3 测试覆盖率

- **功能覆盖率**：待计算
- **代码覆盖率**：待计算
- **场景覆盖率**：待计算

---

## 🐛 问题跟踪

### 4.1 发现的问题

| 问题ID | 问题描述 | 严重程度 | 状态 | 发现时间 |
|--------|----------|----------|------|----------|
| - | - | - | - | - |

### 4.2 问题统计

- **严重问题**：0
- **主要问题**：0
- **次要问题**：0
- **建议**：0

---

## 📝 测试结论

### 5.1 总体评估

待测试完成后填写。

### 5.2 风险评估

待测试完成后填写。

### 5.3 改进建议

待测试完成后填写。

---

## 📚 参考文档

- [14-YYC3-XY-架构类-小语AI浮窗系统全面分析报告.md](file:///Users/yanyu/yyc3-xiaoyu-AAA/yyc3-xy-ai/docs/14-YYC3-XY-架构类-小语AI浮窗系统全面分析报告.md)
- [IntelligentAIWidget.tsx](file:///Users/yanyu/yyc3-xiaoyu-AAA/yyc3-xy-ai/components/ai-widget/IntelligentAIWidget.tsx)
- [ai_roles.ts](file:///Users/yanyu/yyc3-xiaoyu-AAA/yyc3-xy-ai/lib/ai_roles.ts)

---

**测试计划创建时间**：2026-01-19  
**测试执行人**：待分配  
**测试完成时间**：待定  
**测试状态**：🚧 待执行

---

> **"万象归元于云枢 | 深栈智启新纪元"**  
> ***Words Initiate Quadrants, Language Serves as Core for the Future***
